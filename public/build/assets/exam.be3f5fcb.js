import{k as w,r as u,l as k,o as y,a as d,c as n,b as t,F as x,e as f,d as C,w as T,v as $,t as i,m as j}from"./app.77c39b12.js";const B={class:"text-sm pt-10"},E={class:"px-4 pb-20 grid lg:grid-cols-4"},F={class:"lg:col-span-3 lg:pr-4 grid md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4"},D={class:"relative hover:scale-105 ease-in-out duration-300 bg-white shadow-lg rounded-xl h-[300px] overflow-hidden"},L=["src"],M={class:"p-2 px-4"},R={class:"font-medium"},Z={class:"font-bold"},O={class:"absolute left-0 bottom-3 w-full px-4"},P=["onClick"],S={class:"mt-10 lg:mt-0"},V={key:0,class:"bg-white shadow-lg rounded-xl min-h-[100px] sticky top-24 border border-gray-100 p-4"},N=t("div",{class:"text-center font-semibold text-xl"}," Chart ",-1),A={class:"mb-4 flex items-center"},H=["src"],U={class:"grow px-4"},q={class:"font-bold"},z={class:"flex-none"},G=["onClick"],I=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-rose-400"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),J=[I],K={class:"inputan pt-1"},Q=t("span",null,"Paid :",-1),W={class:"text-base font-semibold py-2"},X=t("button",{class:"btn w-full"},"Purchase",-1),et={name:"exam",setup(Y){const g=w(),c=u(5e5),v=u([]),_=u(!1),l=u([{id:1,title:"Example Food0",description:"Example",photo:"http://localhost:8000/uploads/product/example.jpeg",price:25e3,user_id:1,created_at:"2023-10-05T09:24:31.000000Z",updated_at:"2023-10-05T09:24:31.000000Z",deleted_at:null,value:2},{id:2,title:"Example Food1",description:"Example",photo:"http://localhost:8000/uploads/product/example.jpeg",price:25e3,user_id:1,created_at:"2023-10-05T09:24:31.000000Z",updated_at:"2023-10-05T09:24:31.000000Z",deleted_at:null,value:4}]);k(()=>l.value,o=>{console.log(o)},{deep:!0});async function m(){const{data:o}=await axios.get("/product");console.log(o.data),v.value=o.data}async function b(){if(h(l.value)>c.value){confirm("Paid value should above total price!");return}_.value=!0;let o=new FormData;for(let s in l.value)o.append(`product[${s}][value]`,l.value[s].value),o.append(`product[${s}][id]`,l.value[s].id);o.append("paid",c.value);try{const s=await axios.post("/invoice",o);_.value=!1,g.push(`/admin/invoice/${s.data.data.id}`)}catch{}}function h(o){var e,r;let s=0;for(let a in o)s+=((e=o[a])==null?void 0:e.value)*((r=o[a])==null?void 0:r.price);return s}function p(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return y(()=>{m()}),(o,s)=>(d(),n("div",B,[t("div",null,[t("div",E,[t("div",F,[(d(!0),n(x,null,f(v.value,e=>(d(),n("div",D,[t("img",{src:e.photo,class:"object-cover w-full h-[180px]"},null,8,L),t("div",M,[t("div",null,[t("div",R,i(e==null?void 0:e.title),1),t("div",Z," Rp. "+i(p(e==null?void 0:e.price)),1)]),t("div",O,[t("button",{onClick:r=>{l.value.map(a=>a.id).indexOf(e.id)==-1?l.value.push({value:1,...e}):l.value[l.value.map(a=>a.id).indexOf(e.id)].value+=1},class:"btn w-full"}," Add to Chart ",8,P)])])]))),256))]),t("div",S,[l.value.length?(d(),n("div",V,[N,t("div",null,[(d(!0),n(x,null,f(l.value,e=>(d(),n("div",A,[t("img",{src:e.photo,class:"w-16 h-16 object-cover rounded-full flex-none"},null,8,H),t("div",U,[t("div",null,i(e.title),1),t("div",q," x"+i(e.value)+" = Rp. "+i(p((e==null?void 0:e.price)*e.value)),1)]),t("div",z,[t("button",{onClick:r=>l.value.splice(l.value.indexOf(e),1)},J,8,G)])]))),256)),t("form",{onSubmit:s[1]||(s[1]=C(e=>b(),["prevent"])),class:"mt-7"},[t("div",K,[Q,T(t("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e)},null,512),[[$,c.value]])]),t("div",W," Total : Rp. "+i(p(h(l.value))),1),X],32)])])):j("",!0)])])])]))}};export{et as default};
